<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEG ì¼€ì–´ ë„ìš°ë¯¸ - ê²½í”¼ì  ìœ„ë£¨ìˆ  í™˜ì ì±—ë´‡</title>
    <meta name="description" content="ê²½í”¼ì  ìœ„ë£¨ìˆ  í™˜ìì™€ ë³´í˜¸ìë¥¼ ìœ„í•œ 24ì‹œê°„ ì¼€ì–´ ì •ë³´ ì œê³µ ì±—ë´‡">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', 'Noto Sans KR', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .chat-container {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        .typing-animation {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #3b82f6;
            animation: typing 1.4s infinite ease-in-out;
        }
        .typing-animation:nth-child(1) { animation-delay: -0.32s; }
        .typing-animation:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        .search-result {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .search-result:hover {
            background-color: #dbeafe;
            transform: translateY(-1px);
        }
        
        .message-user {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-radius: 18px 18px 4px 18px;
        }
        
        .message-bot {
            background: white;
            color: #374151;
            border-radius: 18px 18px 18px 4px;
            border: 1px solid #e5e7eb;
        }
        
        .search-input {
            border-radius: 25px;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .send-button {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .send-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .quick-button {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 1px solid #cbd5e1;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .quick-button:hover {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script>
        // React ë° ì»´í¬ë„ŒíŠ¸ ìƒì„±
        const { useState, useEffect, useRef, createElement: h } = React;

        // ì•„ì´ì½˜ SVG ë¬¸ìì—´ë“¤
        const icons = {
            send: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>`,
            volume: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M8.5 6L4 10H1v4h3l4.5 4V6z" /></svg>`,
            volumeOff: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" /></svg>`,
            book: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>`,
            phone: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>`,
            chevronUp: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>`,
            pause: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`
        };

        // ì§ˆì˜ì‘ë‹µ ë°ì´í„°ë² ì´ìŠ¤
        const qaDatabase = {
            procedure: {
                title: "ì‹œìˆ  ê´€ë ¨",
                icon: "ğŸ¥",
                questions: [
                    {
                        q: "ê²½í”¼ì  ìœ„ë£¨ìˆ ì´ ë¬´ì—‡ì¸ê°€ìš”?",
                        a: "ê²½í”¼ì  ìœ„ë£¨ìˆ (PEG)ì€ ë°° ì•ìª½ í”¼ë¶€ë¥¼ í†µí•´ ìœ„ì— ê´€ì„ ë„£ì–´ ì˜ì–‘ì„ ê³µê¸‰í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì…ìœ¼ë¡œ ìŒì‹ì„ ë¨¹ê¸° ì–´ë ¤ìš´ í™˜ìë¶„ë“¤ì„ ìœ„í•œ ì•ˆì „í•œ ì¹˜ë£Œ ë°©ë²•ì…ë‹ˆë‹¤.",
                        keywords: ["ê²½í”¼ì ", "ìœ„ë£¨ìˆ ", "PEG", "ì •ì˜", "ë¬´ì—‡"]
                    },
                    {
                        q: "ì‹œìˆ  ì „ì— ì–´ë–¤ ì¤€ë¹„ê°€ í•„ìš”í•œê°€ìš”?",
                        a: "ì‹œìˆ  ì „ 8ì‹œê°„ ì´ìƒ ê¸ˆì‹í•´ì•¼ í•©ë‹ˆë‹¤. í˜ˆì•¡ê²€ì‚¬ë¥¼ í†µí•´ ì¶œí˜ˆ ìœ„í—˜ì„±ì„ í™•ì¸í•˜ê³ , í•­ìƒì œë¥¼ ë¯¸ë¦¬ íˆ¬ì—¬í•©ë‹ˆë‹¤. í¸ì•ˆí•œ ì˜·ì„ ì…ê³  ì˜¤ì‹œë©´ ë©ë‹ˆë‹¤.",
                        keywords: ["ì¤€ë¹„", "ê¸ˆì‹", "ê²€ì‚¬", "ì‹œìˆ ì „"]
                    },
                    {
                        q: "ì‹œìˆ  ì‹œê°„ì€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?",
                        a: "ì¼ë°˜ì ìœ¼ë¡œ 30ë¶„ì—ì„œ 1ì‹œê°„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤. í™˜ìë¶„ì˜ ìƒíƒœì— ë”°ë¼ ì‹œê°„ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                        keywords: ["ì‹œê°„", "ì†Œìš”", "ê±¸ë¦¬ëŠ”", "ì–¼ë§ˆë‚˜"]
                    },
                    {
                        q: "ì‹œìˆ  í›„ ì–¸ì œë¶€í„° ìŒì‹ì„ ë¨¹ì„ ìˆ˜ ìˆë‚˜ìš”?",
                        a: "ì‹œìˆ  í›„ 4-6ì‹œê°„ í›„ë¶€í„° ë¬¼ì´ë‚˜ ìœ ë™ì‹ì„ ì²œì²œíˆ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ë£Œì§„ì˜ ì§€ì‹œì— ë”°ë¼ ë‹¨ê³„ì ìœ¼ë¡œ ì–‘ì„ ëŠ˜ë ¤ê°‘ë‹ˆë‹¤.",
                        keywords: ["ìŒì‹", "ì‹ì‚¬", "ì–¸ì œë¶€í„°", "ì‹œìˆ í›„"]
                    },
                    {
                        q: "ì‹œìˆ  í›„ ì…ì› ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?",
                        a: "ì¼ë°˜ì ìœ¼ë¡œ 1-2ì¼ ì •ë„ ì…ì›í•©ë‹ˆë‹¤. í™˜ìë¶„ì˜ íšŒë³µ ìƒíƒœì™€ í•©ë³‘ì¦ ìœ ë¬´ì— ë”°ë¼ ê¸°ê°„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                        keywords: ["ì…ì›", "ê¸°ê°„", "ë©°ì¹ ", "ì–¸ì œ"]
                    }
                ]
            },
            tubecare: {
                title: "íŠœë¸Œ ê´€ë¦¬",
                icon: "ğŸ”§",
                questions: [
                    {
                        q: "íŠœë¸Œ ì£¼ë³€ í”¼ë¶€ëŠ” ì–´ë–»ê²Œ ê´€ë¦¬í•˜ë‚˜ìš”?",
                        a: "í•˜ë£¨ 1-2íšŒ ê¹¨ë—í•œ ë¬¼ê³¼ ìˆœí•œ ë¹„ëˆ„ë¡œ íŠœë¸Œ ì£¼ë³€ì„ ë¶€ë“œëŸ½ê²Œ ë‹¦ì•„ì£¼ì„¸ìš”. ì•Œì½”ì˜¬ì´ë‚˜ ìê·¹ì ì¸ ì†Œë…ì œëŠ” í”¼í•˜ê³ , ì™„ì „íˆ ê±´ì¡°ì‹œí‚¨ í›„ ê±°ì¦ˆë¡œ ë³´í˜¸í•´ì£¼ì„¸ìš”.",
                        keywords: ["í”¼ë¶€", "ê´€ë¦¬", "ì„¸ì²™", "ì†Œë…", "ê±°ì¦ˆ"]
                    },
                    {
                        q: "íŠœë¸Œê°€ ë¹ ì§€ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "íŠœë¸Œê°€ ë¹ ì§€ë©´ ì¦‰ì‹œ ë³‘ì› ì‘ê¸‰ì‹¤ë¡œ ì˜¤ì„¸ìš”. êµ¬ë©ì´ ë¹ ë¥´ê²Œ ë§‰í ìˆ˜ ìˆì–´ ë¹ ë¥¸ ì²˜ì¹˜ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. íŠœë¸Œ ëì„ ê¹¨ë—í•œ ê±°ì¦ˆë¡œ ë®ì–´ì„œ ê°€ì ¸ì˜¤ì„¸ìš”.",
                        keywords: ["ë¹ ì§", "ì‘ê¸‰", "ì¦‰ì‹œ", "ë³‘ì›"]
                    },
                    {
                        q: "íŠœë¸Œ ë§‰í˜ì„ ì˜ˆë°©í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "ì‹ì‚¬ ì „í›„ì— ë¯¸ì§€ê·¼í•œ ë¬¼ 20-30mlë¡œ íŠœë¸Œë¥¼ ì”»ì–´ì£¼ì„¸ìš”. ì•½ë¬¼ íˆ¬ì—¬ í›„ì—ë„ ë°˜ë“œì‹œ ë¬¼ë¡œ ì”»ì–´ì£¼ê³ , ë†ë„ê°€ ì§„í•œ ì˜ì–‘ì•¡ì€ ë¬¼ë¡œ í¬ì„í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”.",
                        keywords: ["ë§‰í˜", "ì˜ˆë°©", "ì„¸ì²™", "ë¬¼", "ì”»ê¸°"]
                    },
                    {
                        q: "íŠœë¸Œ ê³ ì •ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
                        a: "íŠœë¸Œê°€ ë‹¹ê²¨ì§€ì§€ ì•Šë„ë¡ ë³µëŒ€ë‚˜ ì˜ë£Œìš© í…Œì´í”„ë¡œ ê³ ì •í•´ì£¼ì„¸ìš”. ë„ˆë¬´ ì¡°ì´ë©´ í˜ˆì•¡ìˆœí™˜ì— ë¬¸ì œê°€ ìƒê¸°ë‹ˆ ì ë‹¹í•œ ì—¬ìœ ë¥¼ ë‘ì„¸ìš”.",
                        keywords: ["ê³ ì •", "ë³µëŒ€", "í…Œì´í”„", "ë‹¹ê¹€"]
                    },
                    {
                        q: "íŠœë¸Œ ì£¼ë³€ì— ë¶„ë¹„ë¬¼ì´ ë‚˜ì™€ìš”",
                        a: "ì´ˆê¸° 1-2ì£¼ ë™ì•ˆì€ ì†ŒëŸ‰ì˜ ë¶„ë¹„ë¬¼ì´ ì •ìƒì…ë‹ˆë‹¤. ê¹¨ë—í•œ ê±°ì¦ˆë¡œ ë‹¦ì•„ì£¼ê³ , ë…¸ë€ìƒ‰ì´ë‚˜ ëƒ„ìƒˆê°€ ë‚˜ë©´ ë³‘ì›ì— ì—°ë½í•˜ì„¸ìš”.",
                        keywords: ["ë¶„ë¹„ë¬¼", "ì§„ë¬¼", "ê³ ë¦„", "ëƒ„ìƒˆ"]
                    },
                    {
                        q: "íŠœë¸Œ íšŒì „ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
                        a: "ìˆ˜ìˆ  í›„ 2ì£¼ê°€ ì§€ë‚˜ë©´ ë§¤ì¼ íŠœë¸Œë¥¼ 360ë„ ì²œì²œíˆ ëŒë ¤ì£¼ì„¸ìš”. íŠœë¸Œê°€ í”¼ë¶€ì— ë‹¬ë¼ë¶™ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  ê°ì—¼ì„ ì˜ˆë°©í•©ë‹ˆë‹¤.",
                        keywords: ["íšŒì „", "ëŒë¦¬ê¸°", "360ë„", "ë§¤ì¼"]
                    }
                ]
            },
            nutrition: {
                title: "ì˜ì–‘ ê´€ë¦¬",
                icon: "ğŸ½ï¸",
                questions: [
                    {
                        q: "ì–´ë–¤ ìŒì‹ì„ ë„£ì„ ìˆ˜ ìˆë‚˜ìš”?",
                        a: "ì˜ë£Œì§„ì´ ì²˜ë°©í•œ ì „ìš© ì˜ì–‘ì•¡ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤. ì§‘ì—ì„œ ë§Œë“  ìŒì‹ì€ ë°˜ë“œì‹œ ê°ˆì•„ì„œ ê±¸ëŸ¬ë‚¸ í›„ ì‚¬ìš©í•˜ê³ , ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì„¸ìš”.",
                        keywords: ["ìŒì‹", "ì˜ì–‘ì•¡", "ì²˜ë°©", "ê°ˆì•„ì„œ"]
                    },
                    {
                        q: "í•˜ë£¨ì— ëª‡ ë²ˆ, ì–¼ë§ˆë‚˜ ë¨¹ì—¬ì•¼ í•˜ë‚˜ìš”?",
                        a: "ì¼ë°˜ì ìœ¼ë¡œ í•˜ë£¨ 4-6íšŒ, í•œ ë²ˆì— 200-400ml ì •ë„ ì²œì²œíˆ ì£¼ì…í•©ë‹ˆë‹¤. í™˜ìë¶„ì˜ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥´ë¯€ë¡œ ì˜ë£Œì§„ì˜ ì§€ì‹œë¥¼ ë”°ë¼ì£¼ì„¸ìš”.",
                        keywords: ["íšŸìˆ˜", "ì–‘", "í•˜ë£¨", "ëª‡ë²ˆ"]
                    },
                    {
                        q: "ì˜ì–‘ì•¡ ì˜¨ë„ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "ì²´ì˜¨ ì •ë„(36-37ë„)ë¡œ ë¯¸ì§€ê·¼í•˜ê²Œ ë°ì›Œì„œ ì£¼ì…í•˜ì„¸ìš”. ë„ˆë¬´ ì°¨ê°€ìš°ë©´ ë³µí†µì´ ìƒê¸°ê³ , ë„ˆë¬´ ëœ¨ê±°ìš°ë©´ í™”ìƒì„ ì…ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                        keywords: ["ì˜¨ë„", "ë¯¸ì§€ê·¼", "ì²´ì˜¨", "ë°ìš°ê¸°"]
                    },
                    {
                        q: "ì˜ì–‘ì•¡ ë³´ê´€ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
                        a: "ê°œë´‰ ì „ì—ëŠ” ì‹¤ì˜¨ì—ì„œ ë³´ê´€í•˜ê³ , ê°œë´‰ í›„ì—ëŠ” ëƒ‰ì¥ê³ ì— ë„£ì–´ 24ì‹œê°„ ì´ë‚´ì— ì‚¬ìš©í•˜ì„¸ìš”. ìƒì˜¨ì—ì„œ 2ì‹œê°„ ì´ìƒ ë°©ì¹˜í•˜ë©´ ì„¸ê· ì´ ë²ˆì‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                        keywords: ["ë³´ê´€", "ëƒ‰ì¥ê³ ", "ê°œë´‰", "ì„¸ê· "]
                    },
                    {
                        q: "ì•½ë¬¼ì€ ì–´ë–»ê²Œ íˆ¬ì—¬í•˜ë‚˜ìš”?",
                        a: "ê°€ëŠ¥í•˜ë©´ ì•¡ì²´ í˜•íƒœì˜ ì•½ì„ ì‚¬ìš©í•˜ì„¸ìš”. ì•Œì•½ì€ ìœ¼ê¹¨ì„œ ë¬¼ì— ì™„ì „íˆ ë…¹ì¸ í›„ íˆ¬ì—¬í•˜ê³ , ì•½ë¬¼ ì „í›„ì— ë¬¼ë¡œ íŠœë¸Œë¥¼ ì”»ì–´ì£¼ì„¸ìš”.",
                        keywords: ["ì•½ë¬¼", "ì•Œì•½", "ìœ¼ê¹¨ì„œ", "ì•¡ì²´"]
                    },
                    {
                        q: "ì˜ì–‘ì•¡ ì£¼ì… ì†ë„ëŠ” ì–´ë–»ê²Œ ì¡°ì ˆí•˜ë‚˜ìš”?",
                        a: "ì²œì²œíˆ ì£¼ì…í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë„ˆë¬´ ë¹ ë¥´ë©´ êµ¬í† ë‚˜ ë³µí†µì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. 1mlë‹¹ 1-2ì´ˆ ì •ë„ë¡œ ì²œì²œíˆ ì£¼ì…í•˜ì„¸ìš”.",
                        keywords: ["ì†ë„", "ì²œì²œíˆ", "ì£¼ì…", "ë¹ ë¥´ê²Œ"]
                    }
                ]
            },
            emergency: {
                title: "ì‘ê¸‰ ìƒí™©",
                icon: "ğŸš¨",
                questions: [
                    {
                        q: "ì–´ë–¤ ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ ë³‘ì›ì— ì™€ì•¼ í•˜ë‚˜ìš”?",
                        a: "ë°œì—´(38.5ë„ ì´ìƒ), íŠœë¸Œ ì£¼ë³€ ì‹¬í•œ ë¶“ê¸°, ê³ ë¦„, ì‹¬í•œ í†µì¦, ì§€ì†ì ì¸ ì¶œí˜ˆ, ê³„ì†ë˜ëŠ” êµ¬í† , ë³µí†µì´ ìˆìœ¼ë©´ ì¦‰ì‹œ ë³‘ì›ì— ì˜¤ì„¸ìš”.",
                        keywords: ["ì‘ê¸‰", "ë°œì—´", "ì¶œí˜ˆ", "í†µì¦", "ë³‘ì›"]
                    },
                    {
                        q: "êµ¬í† ê°€ ë‚  ë•ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "ì¦‰ì‹œ ì˜ì–‘ ê³µê¸‰ì„ ì¤‘ë‹¨í•˜ê³ , í™˜ìë¥¼ ì˜†ìœ¼ë¡œ ëˆ•í˜€ì£¼ì„¸ìš”. êµ¬í† ë¬¼ì´ ê¸°ë„ë¡œ ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ê³ , ê³„ì† êµ¬í† í•˜ë©´ ë³‘ì›ì— ì—°ë½í•˜ì„¸ìš”.",
                        keywords: ["êµ¬í† ", "ì¤‘ë‹¨", "ì˜†ìœ¼ë¡œ", "ê¸°ë„"]
                    },
                    {
                        q: "íŠœë¸Œì—ì„œ í”¼ê°€ ë‚˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "ì†ŒëŸ‰ì˜ í”¼ëŠ” ì •ìƒì¼ ìˆ˜ ìˆì§€ë§Œ, ê³„ì† í”¼ê°€ ë‚˜ê±°ë‚˜ ì–‘ì´ ë§ìœ¼ë©´ ì¦‰ì‹œ ë³‘ì›ì— ì˜¤ì„¸ìš”. ê¹¨ë—í•œ ê±°ì¦ˆë¡œ ê°€ë³ê²Œ ëˆŒëŸ¬ì£¼ê³  ë³‘ì›ì— ì—°ë½í•˜ì„¸ìš”.",
                        keywords: ["ì¶œí˜ˆ", "í”¼", "ê±°ì¦ˆ", "ëˆŒëŸ¬"]
                    },
                    {
                        q: "ê°ì—¼ ì§•í›„ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
                        a: "íŠœë¸Œ ì£¼ë³€ì´ ë¹¨ê°›ê²Œ ë¶“ê³ , ì—´ì´ ë‚˜ë©°, ê³ ë¦„ì´ ë‚˜ì˜¤ê±°ë‚˜ ëƒ„ìƒˆê°€ ë‚˜ë©´ ê°ì—¼ ì§•í›„ì…ë‹ˆë‹¤. ì¦‰ì‹œ ë³‘ì›ì— ì™€ì„œ ì¹˜ë£Œë°›ìœ¼ì„¸ìš”.",
                        keywords: ["ê°ì—¼", "ë¶“ê¸°", "ê³ ë¦„", "ëƒ„ìƒˆ", "ì—´"]
                    },
                    {
                        q: "íŠœë¸Œê°€ ë§‰í˜”ì„ ë•Œ ì‘ê¸‰ì²˜ì¹˜ëŠ”?",
                        a: "ë¯¸ì§€ê·¼í•œ ë¬¼ë¡œ ë¶€ë“œëŸ½ê²Œ ë°€ì–´ë³´ì„¸ìš”. ì ˆëŒ€ ì–µì§€ë¡œ ë°€ì§€ ë§ˆì‹œê³ , ëš«ë¦¬ì§€ ì•Šìœ¼ë©´ ì¦‰ì‹œ ë³‘ì›ì— ì—°ë½í•˜ì„¸ìš”. ì² ì‚¬ë‚˜ ë‹¤ë¥¸ ë„êµ¬ëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.",
                        keywords: ["ë§‰í˜", "ì‘ê¸‰ì²˜ì¹˜", "ë¯¸ì§€ê·¼í•œë¬¼", "ì–µì§€ë¡œ"]
                    },
                    {
                        q: "ì‘ê¸‰ì‹¤ì— ê°ˆ ë•Œ ì¤€ë¹„í•  ê²ƒì€?",
                        a: "ì§„ë£Œ ê¸°ë¡, ë³µìš© ì¤‘ì¸ ì•½ë¬¼ ë¦¬ìŠ¤íŠ¸, ë³´í—˜ì¹´ë“œ, íŠœë¸Œ ê´€ë ¨ ìš©í’ˆì„ ê°€ì ¸ê°€ì„¸ìš”. ê°€ëŠ¥í•˜ë©´ ì–¸ì œë¶€í„° ì¦ìƒì´ ì‹œì‘ë˜ì—ˆëŠ”ì§€ ë©”ëª¨í•´ë‘ì„¸ìš”.",
                        keywords: ["ì‘ê¸‰ì‹¤", "ì¤€ë¹„", "ì§„ë£Œê¸°ë¡", "ì•½ë¬¼ë¦¬ìŠ¤íŠ¸"]
                    }
                ]
            },
            daily: {
                title: "ì¼ìƒìƒí™œ",
                icon: "ğŸ ",
                questions: [
                    {
                        q: "ëª©ìš•ì€ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                        a: "íŠœë¸Œ ë¶€ìœ„ì— ë¬¼ì´ ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ ë°©ìˆ˜ íŒ¨ì¹˜ë¡œ ë³´í˜¸í•˜ê³  ìƒ¤ì›Œí•˜ì„¸ìš”. ëª©ìš•íƒ•ì—ì„œ ëª¸ì„ ë‹´ê·¸ëŠ” ê²ƒì€ í”¼í•˜ê³ , ìƒ¤ì›Œ í›„ íŠœë¸Œ ì£¼ë³€ì„ ì˜ ë§ë ¤ì£¼ì„¸ìš”.",
                        keywords: ["ëª©ìš•", "ìƒ¤ì›Œ", "ë°©ìˆ˜", "íŒ¨ì¹˜"]
                    },
                    {
                        q: "ìš´ë™ì´ë‚˜ í™œë™ì€ ì–´ëŠ ì •ë„ í•  ìˆ˜ ìˆë‚˜ìš”?",
                        a: "ê°€ë²¼ìš´ ì‚°ì±…ì´ë‚˜ ìŠ¤íŠ¸ë ˆì¹­ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, íŠœë¸Œê°€ ë‹¹ê²¨ì§€ê±°ë‚˜ ì••ë°•ë°›ì„ ìˆ˜ ìˆëŠ” ê²©í•œ ìš´ë™ì€ í”¼í•˜ì„¸ìš”. ì˜ë£Œì§„ê³¼ ìƒì˜í•´ì„œ ì ì ˆí•œ í™œë™ ìˆ˜ì¤€ì„ ì •í•˜ì„¸ìš”.",
                        keywords: ["ìš´ë™", "í™œë™", "ì‚°ì±…", "ìŠ¤íŠ¸ë ˆì¹­"]
                    },
                    {
                        q: "ì™¸ì¶œí•  ë•Œ ì£¼ì˜ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                        a: "íŠœë¸Œê°€ ê±¸ë¦¬ì§€ ì•Šë„ë¡ í—ë í•œ ì˜·ì„ ì…ê³ , ì‘ê¸‰ìƒí™©ì— ëŒ€ë¹„í•´ ë³‘ì› ì—°ë½ì²˜ì™€ ê°„ë‹¨í•œ ì‘ê¸‰ìš©í’ˆì„ ì¤€ë¹„í•˜ì„¸ìš”. ì¥ê±°ë¦¬ ì—¬í–‰ì€ ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì„¸ìš”.",
                        keywords: ["ì™¸ì¶œ", "ì˜·", "ì‘ê¸‰ìš©í’ˆ", "ì—¬í–‰"]
                    },
                    {
                        q: "ìˆ˜ë©´ ì‹œ ì£¼ì˜ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                        a: "íŠœë¸Œê°€ êº¾ì´ê±°ë‚˜ ë‹¹ê²¨ì§€ì§€ ì•Šë„ë¡ í¸ì•ˆí•œ ìì„¸ë¡œ ì£¼ë¬´ì„¸ìš”. ë² ê°œë‚˜ ì¿ ì…˜ì„ ì´ìš©í•´ íŠœë¸Œë¥¼ ë³´í˜¸í•˜ê³ , ì ìë¦¬ì—ì„œ ë’¤ì²™ì¼ ë•Œ ì¡°ì‹¬í•˜ì„¸ìš”.",
                        keywords: ["ìˆ˜ë©´", "ì ", "ìì„¸", "ë² ê°œ"]
                    },
                    {
                        q: "ì˜·ì€ ì–´ë–¤ ê²ƒì„ ì…ì–´ì•¼ í•˜ë‚˜ìš”?",
                        a: "íŠœë¸Œê°€ ê±¸ë¦¬ì§€ ì•Šë„ë¡ ì•ìœ¼ë¡œ ì—¬ë¯¸ëŠ” ì˜·ì´ë‚˜ ë„‰ë„‰í•œ ì˜·ì„ ì…ìœ¼ì„¸ìš”. ë„ˆë¬´ ê½‰ ë¼ëŠ” ì˜·ì€ í”¼í•˜ê³ , íŠœë¸Œë¥¼ ì••ë°•í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.",
                        keywords: ["ì˜·", "ì˜ë³µ", "ì•ì—¬ë°ˆ", "ë„‰ë„‰í•œ"]
                    },
                    {
                        q: "ì§ì¥ ìƒí™œì€ ì–¸ì œë¶€í„° ê°€ëŠ¥í•œê°€ìš”?",
                        a: "ì¼ë°˜ì ìœ¼ë¡œ ì‹œìˆ  í›„ 1-2ì£¼ í›„ë¶€í„° ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê°œì¸ì°¨ê°€ ìˆìœ¼ë¯€ë¡œ ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì—¬ ê²°ì •í•˜ì„¸ìš”. ì²˜ìŒì—ëŠ” ê°€ë²¼ìš´ ì—…ë¬´ë¶€í„° ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.",
                        keywords: ["ì§ì¥", "ì—…ë¬´", "ì–¸ì œë¶€í„°", "ë³µê·€"]
                    }
                ]
            }
        };

        // ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
        function PegCareChatbot() {
            const [messages, setMessages] = useState([]);
            const [currentInput, setCurrentInput] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            const [voiceEnabled, setVoiceEnabled] = useState(false);
            const [isPlaying, setIsPlaying] = useState(false);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [showQuickGuide, setShowQuickGuide] = useState(false);
            const [searchResults, setSearchResults] = useState([]);
            const [isSearching, setIsSearching] = useState(false);
            const messagesEndRef = useRef(null);

            // ìŒì„± í•©ì„± í•¨ìˆ˜
            const speakText = (text) => {
                if (voiceEnabled && window.speechSynthesis) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ko-KR';
                    utterance.rate = 0.8;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    utterance.onstart = () => setIsPlaying(true);
                    utterance.onend = () => setIsPlaying(false);
                    
                    window.speechSynthesis.speak(utterance);
                }
            };

            // ìŒì„± ì¤‘ì§€ í•¨ìˆ˜
            const stopSpeaking = () => {
                if (window.speechSynthesis) {
                    window.speechSynthesis.cancel();
                    setIsPlaying(false);
                }
            };

            // ê²€ìƒ‰ í•¨ìˆ˜
            const searchQuestions = (searchTerm) => {
                if (!searchTerm.trim()) {
                    setSearchResults([]);
                    return;
                }

                setIsSearching(true);
                const searchText = searchTerm.toLowerCase();
                const results = [];

                for (const [categoryKey, category] of Object.entries(qaDatabase)) {
                    for (const item of category.questions) {
                        const questionMatch = item.q.toLowerCase().includes(searchText);
                        const keywordMatch = item.keywords.some(keyword => 
                            keyword.toLowerCase().includes(searchText) || 
                            searchText.includes(keyword.toLowerCase())
                        );
                        const answerMatch = item.a.toLowerCase().includes(searchText);

                        if (questionMatch || keywordMatch || answerMatch) {
                            results.push({
                                ...item,
                                category: category.title,
                                categoryKey,
                                icon: category.icon
                            });
                        }
                    }
                }

                setTimeout(() => {
                    setSearchResults(results);
                    setIsSearching(false);
                }, 300);
            };

            // ë©”ì‹œì§€ ì „ì†¡ í•¨ìˆ˜
            const sendMessage = (text = currentInput) => {
                if (!text.trim()) return;

                const userMessage = {
                    id: Date.now(),
                    type: 'user',
                    content: text,
                    timestamp: new Date()
                };

                setMessages(prev => [...prev, userMessage]);
                setCurrentInput('');
                setSearchResults([]);
                setIsTyping(true);

                // ê²€ìƒ‰í•˜ì—¬ ë‹µë³€ ì°¾ê¸°
                const searchText = text.toLowerCase();
                let answer = "ì£„ì†¡í•©ë‹ˆë‹¤. ì •í™•í•œ ë‹µë³€ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì§ˆë¬¸í•´ ì£¼ì‹œê±°ë‚˜, ë‹´ë‹¹ ì˜ë£Œì§„ì—ê²Œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.\n\nğŸ“ ì‘ê¸‰ìƒí™© ì‹œ: ë³‘ì› ì‘ê¸‰ì‹¤ (000-000-0000)\n\nğŸ’¡ ê²€ìƒ‰ íŒ:\nâ€¢ 'íŠœë¸Œ ê´€ë¦¬', 'ì˜ì–‘ ê³µê¸‰', 'ì‘ê¸‰ìƒí™©' ë“± êµ¬ì²´ì ì¸ í‚¤ì›Œë“œ ì‚¬ìš©\nâ€¢ ì¦ìƒì´ë‚˜ ìƒí™©ì„ ìì„¸íˆ ì„¤ëª…í•´ ì£¼ì„¸ìš”\nâ€¢ ë¹ ë¥¸ ê°€ì´ë“œ ğŸ“– ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ì„ í™•ì¸í•´ë³´ì„¸ìš”";
                
                for (const category of Object.values(qaDatabase)) {
                    for (const item of category.questions) {
                        const questionMatch = item.q.toLowerCase().includes(searchText);
                        const keywordMatch = item.keywords.some(keyword => 
                            keyword.toLowerCase().includes(searchText) || 
                            searchText.includes(keyword.toLowerCase())
                        );
                        
                        if (questionMatch || keywordMatch) {
                            answer = item.a;
                            break;
                        }
                    }
                                            if (answer !== "ì£„ì†¡í•©ë‹ˆë‹¤. ì •í™•í•œ ë‹µë³€ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì§ˆë¬¸í•´ ì£¼ì‹œê±°ë‚˜, ë‹´ë‹¹ ì˜ë£Œì§„ì—ê²Œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.\n\nğŸ“ ì‘ê¸‰ìƒí™© ì‹œ: ë³‘ì› ì‘ê¸‰ì‹¤ (000-000-0000)\n\nğŸ’¡ ê²€ìƒ‰ íŒ:\nâ€¢ 'íŠœë¸Œ ê´€ë¦¬', 'ì˜ì–‘ ê³µê¸‰', 'ì‘ê¸‰ìƒí™©' ë“± êµ¬ì²´ì ì¸ í‚¤ì›Œë“œ ì‚¬ìš©\nâ€¢ ì¦ìƒì´ë‚˜ ìƒí™©ì„ ìì„¸íˆ ì„¤ëª…í•´ ì£¼ì„¸ìš”\nâ€¢ ë¹ ë¥¸ ê°€ì´ë“œ ğŸ“– ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ì„ í™•ì¸í•´ë³´ì„¸ìš”") break;
                }

                // ë´‡ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
                setTimeout(() => {
                    const botResponse = {
                        id: Date.now() + 1,
                        type: 'bot',
                        content: answer,
                        timestamp: new Date()
                    };
                    
                    setMessages(prev => [...prev, botResponse]);
                    setIsTyping(false);
                    
                    // ìŒì„± ì¶œë ¥
                    if (voiceEnabled) {
                        speakText(botResponse.content);
                    }
                }, 1000);
            };

            // ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ í•„í„°ë§
            const getFilteredQuestions = () => {
                if (selectedCategory === 'all') {
                    return Object.values(qaDatabase).flatMap(category => 
                        category.questions.map(q => ({ ...q, category: category.title, icon: category.icon }))
                    );
                }
                return qaDatabase[selectedCategory]?.questions.map(q => ({ ...q, icon: qaDatabase[selectedCategory].icon })) || [];
            };

            // ë©”ì‹œì§€ ìë™ ìŠ¤í¬ë¡¤
            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            // ì´ˆê¸° ì¸ì‚¬ë§
            useEffect(() => {
                const initialMessage = {
                    id: 1,
                    type: 'bot',
                    content: "ì•ˆë…•í•˜ì„¸ìš”! ê²½í”¼ì  ìœ„ë£¨ìˆ  í™˜ì ì¼€ì–´ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ğŸ˜Š\n\nì•„ë˜ ê²€ìƒ‰ì°½ì— ê¶ê¸ˆí•œ ë‚´ìš©ì„ ì…ë ¥í•˜ì‹œë©´ ê´€ë ¨ ë‹µë³€ì„ ì°¾ì•„ë“œë¦´ê²Œìš”!\n\nğŸ’¡ ê²€ìƒ‰ ì˜ˆì‹œ:\nâ€¢ 'íŠœë¸Œ ê´€ë¦¬' - ì¼ìƒì ì¸ ê´€ë¦¬ ë°©ë²•\nâ€¢ 'ì˜ì–‘ ê³µê¸‰' - ìŒì‹ê³¼ ì˜ì–‘ì•¡ ê´€ë ¨\nâ€¢ 'ì‘ê¸‰ìƒí™©' - ìœ„í—˜ ì§•í›„ì™€ ëŒ€ì²˜ë²•\nâ€¢ 'ëª©ìš•' - ì¼ìƒìƒí™œ ì£¼ì˜ì‚¬í•­\n\nğŸ“– ë¹ ë¥¸ ê°€ì´ë“œ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ë„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆì–´ìš”!",
                    timestamp: new Date()
                };
                setMessages([initialMessage]);
            }, []);

            return h('div', { className: "max-w-md mx-auto bg-white min-h-screen flex flex-col" }, [
                // í—¤ë”
                h('div', { className: "bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 sticky top-0 z-10 shadow-lg" }, [
                    h('div', { className: "flex items-center justify-between" }, [
                        h('div', { className: "flex items-center space-x-3" }, [
                            h('div', { className: "w-12 h-12 bg-white rounded-full flex items-center justify-center" }, [
                                h('span', { className: "text-blue-600 font-bold text-xs" }, "ë³‘ì›ë¡œê³ ")
                            ]),
                            h('div', {}, [
                                h('h1', { className: "text-lg font-bold" }, "PEG ì¼€ì–´ ë„ìš°ë¯¸"),
                                h('p', { className: "text-xs text-blue-100" }, "ê²½í”¼ì  ìœ„ë£¨ìˆ  í™˜ì ì§€ì›")
                            ])
                        ]),
                        h('div', { className: "flex items-center space-x-2" }, [
                            h('button', {
                                onClick: () => {
                                    if (isPlaying) {
                                        stopSpeaking();
                                    } else {
                                        setVoiceEnabled(!voiceEnabled);
                                    }
                                },
                                className: "p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",
                                title: voiceEnabled ? "ìŒì„± ê¸°ëŠ¥ ì¼œì§" : "ìŒì„± ê¸°ëŠ¥ êº¼ì§",
                                dangerouslySetInnerHTML: { __html: isPlaying ? icons.pause : (voiceEnabled ? icons.volume : icons.volumeOff) }
                            }),
                            h('button', {
                                onClick: () => setShowQuickGuide(!showQuickGuide),
                                className: "p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",
                                title: "ë¹ ë¥¸ ê°€ì´ë“œ",
                                dangerouslySetInnerHTML: { __html: icons.book }
                            })
                        ])
                    ])
                ]),

                // ë¹ ë¥¸ ê°€ì´ë“œ
                showQuickGuide && h('div', { className: "bg-blue-50 p-4 border-b" }, [
                    h('div', { className: "flex items-center justify-between mb-3" }, [
                        h('h3', { className: "font-bold text-blue-800" }, "ë¹ ë¥¸ ê°€ì´ë“œ"),
                        h('button', {
                            onClick: () => setShowQuickGuide(false),
                            className: "text-blue-600 hover:text-blue-800",
                            dangerouslySetInnerHTML: { __html: icons.chevronUp }
                        })
                    ]),
                    h('div', { className: "space-y-2 mb-3" }, [
                        h('select', {
                            value: selectedCategory,
                            onChange: (e) => setSelectedCategory(e.target.value),
                            className: "w-full p-3 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        }, [
                            h('option', { value: "all" }, "ğŸ“‹ ì „ì²´ ì¹´í…Œê³ ë¦¬"),
                            h('option', { value: "procedure" }, "ğŸ¥ ì‹œìˆ  ê´€ë ¨"),
                            h('option', { value: "tubecare" }, "ğŸ”§ íŠœë¸Œ ê´€ë¦¬"),
                            h('option', { value: "nutrition" }, "ğŸ½ï¸ ì˜ì–‘ ê´€ë¦¬"),
                            h('option', { value: "emergency" }, "ğŸš¨ ì‘ê¸‰ ìƒí™©"),
                            h('option', { value: "daily" }, "ğŸ  ì¼ìƒìƒí™œ")
                        ])
                    ]),
                    h('div', { className: "space-y-2 max-h-60 overflow-y-auto" }, 
                        getFilteredQuestions().map((item, index) =>
                            h('button', {
                                key: index,
                                onClick: () => {
                                    sendMessage(item.q);
                                    setShowQuickGuide(false);
                                },
                                className: "w-full text-left p-3 bg-white rounded-lg text-sm hover:bg-blue-100 transition-colors border hover:border-blue-300 shadow-sm quick-button"
                            }, [
                                h('div', { className: "font-medium text-blue-800" }, item.q),
                                selectedCategory === 'all' && h('div', { className: "text-xs text-blue-600 mt-1" }, `${item.icon} ${item.category}`)
                            ])
                        )
                    )
                ]),

                // ë©”ì‹œì§€ ì˜ì—­
                h('div', { className: "flex-1 p-4 space-y-4 overflow-y-auto bg-gray-50 chat-container" }, [
                    ...messages.map((message) =>
                        h('div', {
                            key: message.id,
                            className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'} fade-in`
                        }, [
                            h('div', {
                                className: `max-w-xs lg:max-w-md p-4 ${message.type === 'user' ? 'message-user' : 'message-bot'} shadow-md`
                            }, [
                                h('div', { className: "whitespace-pre-wrap text-base leading-relaxed" }, message.content),
                                h('div', { className: "text-xs mt-2 opacity-70" }, 
                                    message.timestamp.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })
                                )
                            ])
                        ])
                    ),
                    
                    isTyping && h('div', { className: "flex justify-start fade-in" }, [
                        h('div', { className: "bg-white p-4 rounded-2xl rounded-bl-md shadow-md border" }, [
                            h('div', { className: "flex items-center space-x-2" }, [
                                h('div', { className: "typing-animation" }),
                                h('div', { className: "typing-animation" }),
                                h('div', { className: "typing-animation" }),
                                h('span', { className: "text-sm text-gray-500 ml-2" }, "ë‹µë³€ ì¤€ë¹„ ì¤‘...")
                            ])
                        ])
                    ]),
                    h('div', { ref: messagesEndRef })
                ]),

                // ì…ë ¥ ì˜ì—­
                h('div', { className: "p-4 bg-white border-t relative" }, [
                    h('div', { className: "flex space-x-2" }, [
                        h('div', { className: "flex-1 relative" }, [
                            h('input', {
                                type: "text",
                                value: currentInput,
                                onChange: (e) => {
                                    setCurrentInput(e.target.value);
                                    searchQuestions(e.target.value);
                                },
                                onKeyPress: (e) => {
                                    if (e.key === 'Enter') {
                                        sendMessage();
                                    }
                                },
                                placeholder: "íŠœë¸Œ ê´€ë¦¬, ì˜ì–‘ ê³µê¸‰, ì‘ê¸‰ìƒí™© ë“±ì„ ê²€ìƒ‰í•˜ì„¸ìš”...",
                                className: "w-full p-4 pr-12 search-input text-lg outline-none"
                            }),
                            currentInput && h('button', {
                                onClick: () => {
                                    setCurrentInput('');
                                    setSearchResults([]);
                                },
                                className: "absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
                            }, "âœ•")
                        ]),
                        h('button', {
                            onClick: () => sendMessage(),
                            disabled: !currentInput.trim(),
                            className: "w-14 h-14 text-white rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg send-button",
                            dangerouslySetInnerHTML: { __html: icons.send }
                        })
                    ]),
                    
                    // ê²€ìƒ‰ ê²°ê³¼
                    (searchResults.length > 0 || isSearching) && h('div', { className: "absolute bottom-full left-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg z-20 max-h-80 overflow-y-auto mb-2" }, [
                        isSearching ? h('div', { className: "p-4 text-center" }, [
                            h('div', { className: "inline-flex items-center space-x-2" }, [
                                h('div', { className: "w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin" }),
                                h('span', { className: "text-gray-600" }, "ê²€ìƒ‰ ì¤‘...")
                            ])
                        ]) : h('div', {}, [
                            searchResults.length === 0 ? h('div', { className: "p-4 text-center text-gray-500" }, "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.") :
                            searchResults.map((result, index) =>
                                h('button', {
                                    key: index,
                                    onClick: () => {
                                        sendMessage(result.q);
                                        setSearchResults([]);
                                    },
                                    className: "w-full text-left p-4 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 search-result"
                                }, [
                                    h('div', { className: "font-medium text-blue-800 mb-1" }, result.q),
                                    h('div', { className: "text-xs text-blue-600 mb-1" }, `${result.icon} ${result.category}`),
                                    h('div', { className: "text-sm text-gray-600 line-clamp-2" }, result.a.substring(0, 100) + "...")
                                ])
                            )
                        ])
                    ])
                ]),

                // ì‘ê¸‰ì—°ë½ì²˜
                h('div', { className: "bg-red-50 p-4 border-t border-red-200" }, [
                    h('div', { className: "flex items-center justify-center space-x-2" }, [
                        h('div', { dangerouslySetInnerHTML: { __html: icons.phone } }),
                        h('span', { className: "text-sm text-red-800 font-medium" }, "ì‘ê¸‰ì‹œ ë³‘ì› ì—°ë½ì²˜: 000-000-0000")
                    ]),
                    h('div', { className: "text-xs text-red-600 text-center mt-1" }, "24ì‹œê°„ ì‘ê¸‰ìƒí™© ëŒ€ì‘ | íŠœë¸Œ ê´€ë ¨ ì‘ê¸‰ìƒí™© ì‹œ ì¦‰ì‹œ ì—°ë½")
                ])
            ]);
        }

        // ì•± ë Œë”ë§
        ReactDOM.render(React.createElement(PegCareChatbot), document.getElementById('root'));
    </script>
</body>
</html>
